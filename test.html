<!DOCTYPE html>
<html>
<head>
    <title>Pico Example</title>
    <script src="js/jquery-1.9.1.min.js"></script>
    <script type="text/javascript" src="/pico/client.js"></script>
    <script type="text/javascript">
        console.log(window.screen.availHeight);
        console.log(window.screen.availWidth);
        var i = 1;  
        pico.load('async');
        pico.main = function() {
            var displayMessage = function(message){
               document.getElementById('message').innerHTML += message + '<br />';
           }

          function setBackground(image) {
              var wallpaper = '/' + image.name;
              console.log(image)
              console.log(image.uuid)
              console.log(image.name)
              console.log(wallpaper)
              $("#wallpaper").css('background-image', 'url(' + wallpaper + ')');
          }

          async.get_wallpaper(setBackground);
          /*  set your counter to 1
          function myLoop () {           //  create a loop function
             setTimeout(function () {    //  call a 3s setTimeout when the loop is called
                async.get_wallpaper(displayMessage);
                i++;                     //  increment the counter
                if (i < 10) {            //  if the counter < 10, call the loop function
                   myLoop();             //  ..  again which will trigger another 
                }                        //  ..  setTimeout()
             }, 500)
          }
          myLoop();
          */
        }
    </script>
</head>
<body id="wallpaper">
        <div id="message"></div>
</body>
</html>